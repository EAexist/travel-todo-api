spring:
  flyway:
    enabled: true
    baseline-on-migrate: true
  datasource:
    driver-class-name: org.postgresql.Driver
  security:
    oauth2:
      resourceserver:
        jwt:
          kakao:
            issuer-uri: https://kauth.kakao.com
          google:
            issuer-uri: https://accounts.google.com
  session:
    jdbc:
      initialize-schema: always
  ai:
    vertex:
      ai:
        gemini:
          project-id: travel-checklist-461608
          #   credentials-uri: classpath:/certs/application_default_credentials.json
          location: us-west1
          chat:
            options:
              model: gemini-2.0-flash-lite
  cloud:
    gcp:
      project-id: travel-checklist-461608
    #   credentials:
    # location: ${GCP_CREDENTIALS_LOCATION}
    # location: classpath:/certs/gc-service-account-key.json
  cache:
    jcache:
      provider: com.github.benmanes.caffeine.jcache.spi.CaffeineCachingProvider
    cache-names:
      - create-reservation-from-text-api-call-quota-cache
    caffeine:
      spec: maximumSize=100000,expireAfterAccess=30d
logging:
  level:
    org:
      springframework:
        security: DEBUG
app:
  quota:
    max-trips: 5
    max-trip-duration-days: 60
    max-destinations: 4
    max-todos: 64
    max-reservations: 64
  security:
    admin-emails: hyeon.expression@gmail.com
  google:
    client-id: 428235231680-j847tt5013n612lk39j8rjp6gih61fsd.apps.googleusercontent.com
    web-client-id: 428235231680-9nkmdpjmnp35484s3unlpm6nnf4g05t4.apps.googleusercontent.com
  cors:
    allowed-origins: ""

# @TODO: use redis, not caffeine.
bucket4j:
  enabled: true
  filters:
    - cache-name: create-reservation-from-text-api-call-quota-cache
      url: ^/trip/[^/]+/reservation/analysis/text$
      filter-method: servlet
      rate-limits:
        # @TODO: use user account id as cache key (Current approach: ip address as cache key)
        - cache-key: "getRemoteAddr()"
          bandwidths:
            - capacity: 2
              time: 30
              unit: days
              refill-speed: interval
          execute-predicates:
            - "METHOD=GET"
            - "METHOD=POST"
